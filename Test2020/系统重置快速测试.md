# 系统重置功能快速测试指南

## 🎯 功能说明

按下红外遥控器 **POWER** 键，系统将执行以下重置：

1. ✅ 模式 → 万年历模式
2. ✅ 时间 → 2019-12-31 23:59:00
3. ✅ 密码 → 00000000

---

## 🧪 快速测试步骤

### 步骤1：准备工作

**当前状态**（示例）：
- 模式：任意模式（Calendar/Safe/Calculator）
- 时间：当前实际时间（如 2025-10-15 14:30:25）
- 密码：12345678（默认）或其他自定义密码

---

### 步骤2：执行重置

**操作**：按下红外遥控器 **POWER** 键

**观察**：
```
LCD第一行： System Reset!
LCD第二行： Time&PWD Reset
（显示约2秒）
```

---

### 步骤3：验证重置结果

#### 3.1 验证时间重置

**检查项1：时间显示**
```
LCD第一行应显示： 2019-12-31
LCD第二行应显示： 23:59:00  XX.XX°C
```
✅ 时间正确显示为 2019年12月31日 23点59分00秒

**检查项2：时间进位（重要测试）**
```
等待约1分钟...

LCD应自动更新为：
第一行： 2020-01-01
第二行： 00:00:00  XX.XX°C
```
✅ 时间正确进位到 2020年1月1日 0点0分0秒

---

#### 3.2 验证密码重置

**步骤**：
1. 按 **MODE** 键，切换到密码锁模式（Safe模式）
2. LCD显示：`Enter Password:`
3. 依次按数字键：`0` `0` `0` `0` `0` `0` `0` `0`
4. 按 **EQ** 键确认

**预期结果**：
```
LCD第一行： Password OK!
LCD第二行： Opening Door...

（步进电机开始动作）
正转5圈 → 暂停0.5秒 → 反转5圈

LCD显示： Door Opened!
```
✅ 密码验证成功，密码已重置为 `00000000`

---

#### 3.3 验证模式重置

**检查**：重置后系统应自动处于万年历模式

```
LCD显示内容：
第一行： 日期（2019-12-31 或 2020-01-01）
第二行： 时间和温度（HH:mm:ss  TT.TT°C）
```
✅ 系统处于万年历显示模式

---

### 步骤4：验证持久化（可选）

**目的**：验证重置后的数据是否保存到EEPROM

**操作**：
1. 断电（拔掉电源或按复位键）
2. 等待几秒
3. 重新上电

**预期结果**：
```
开机后LCD显示：
第一行： 2019-12-31（或已进位后的时间）
第二行： 23:59:XX  XX.XX°C
```
✅ 时间数据保存成功

**验证密码**：
1. 切换到密码锁模式
2. 输入 `00000000`
3. 应能成功验证

✅ 密码数据保存成功

---

## 📋 测试检查表

| 序号 | 测试项 | 操作 | 预期结果 | 实际结果 |
|-----|--------|------|---------|---------|
| 1 | 重置触发 | 按POWER键 | LCD显示重置信息 | ⬜ |
| 2 | 时间重置 | 观察LCD | 显示2019-12-31 23:59:00 | ⬜ |
| 3 | 时间进位 | 等待1分钟 | 显示2020-01-01 00:00:00 | ⬜ |
| 4 | 密码重置 | 输入00000000 | 验证成功并开门 | ⬜ |
| 5 | 模式重置 | 观察显示 | 处于万年历模式 | ⬜ |
| 6 | EEPROM保存 | 断电重启 | 数据保持不变 | ⬜ |

---

## 🎯 常见测试场景

### 场景1：从密码锁模式重置

**初始状态**：
- 当前在密码锁模式
- 正在输入密码（如已输入 `1234____`）

**操作**：按 POWER 键

**结果**：
- 密码输入被中断
- 显示重置信息2秒
- 自动切换到万年历模式
- 时间显示为 2019-12-31 23:59:00

---

### 场景2：从计算器模式重置

**初始状态**：
- 当前在计算器模式
- 可能正在计算（如显示 `Num1: 123`）

**操作**：按 POWER 键

**结果**：
- 计算器状态被清除
- 显示重置信息2秒
- 自动切换到万年历模式
- 时间显示为 2019-12-31 23:59:00

---

### 场景3：忘记密码恢复

**问题**：用户设置了新密码但忘记了

**解决步骤**：
1. 按 POWER 键重置系统
2. 等待重置完成
3. 切换到密码锁模式
4. 使用新密码 `00000000` 登录
5. 按 START/STOP 键切换到设置模式
6. 重新设置新密码

---

## ⏱️ 时间参考

| 事件 | 耗时 |
|-----|------|
| 按键触发 | 0ms |
| 写入EEPROM（时间） | ~35ms |
| 写入EEPROM（密码） | ~40ms |
| 显示重置信息 | 2000ms |
| **总耗时** | **约2.1秒** |

---

## 🔔 注意事项

### ⚠️ 重要提醒

1. **不可逆操作**：重置后无法恢复原有的时间和密码设置
2. **无二次确认**：按下POWER键立即执行，请谨慎操作
3. **数据丢失**：当前设置的密码将被清除

### 💡 使用建议

1. **测试前备份**：如果当前有重要的时间或密码设置，请先记录
2. **测试环境**：建议在测试环境下使用此功能
3. **生产环境**：如需在生产环境使用，建议添加二次确认机制

---

## 🎓 重置后的默认值

| 项目 | 重置后的值 |
|-----|-----------|
| 系统模式 | Calendar（万年历） |
| 年份 | 2019（19） |
| 月份 | 12月 |
| 日期 | 31日 |
| 时间 | 23:59:00 |
| 星期 | 星期二 |
| 密码 | 00000000 |

---

## 📞 测试结果记录

### 测试信息

- **测试日期**：________
- **测试人员**：________
- **硬件版本**：________
- **软件版本**：v1.0

### 测试结果

- [ ] ✅ 所有功能正常
- [ ] ⚠️ 部分功能异常（请说明）：________________
- [ ] ❌ 功能失败（请说明）：________________

### 备注

```
_____________________________________________
_____________________________________________
_____________________________________________
```

---

## 🔗 相关文档

- 详细说明：`系统重置功能说明.md`
- 万年历功能：`万年历设置功能说明.md`
- 密码锁功能：`密码功能使用说明.md`
- 完整项目：`项目完整说明.md`

---

**版本**: v1.0  
**日期**: 2025-10-15  
**测试重点**: 时间进位 + 密码重置
